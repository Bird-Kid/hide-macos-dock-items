# Hide Finder & Trash Dock Items

The following steps (should) allow you to hide the _Finder_ and/or _Trash_ items from your macOS Dock.

These instructions and scripts were successfully tested on macOS Catalina v10.15. Your milage may vary.

## Instructions

**Note:** The following instructions will vary depending on whether your system is a n original macOS (e.g. a MacBook or iMac) or a Hackintosh. If you're not sure which one you're looking at, chances are it's a regular macOS installation (henceforce referred to as _Regular macOS_). Please follow the steps specific to your system.

1. Disable _System Integrity Protection_:
   - _Regular macOS:_
     1. Boot into _Recovery Mode_:
        ```bash
        sudo nvram "recovery-boot-mode=unused"
        sudo reboot
        ```
     1. Once in _Recovery Mode_ open the _Terminal_ app (_Utilities > Terminal_).
     1. Disable _SIP_ & reboot:
        ```bash
        csrutil disable
        reboot
        ```
   - _Hackintosh:_
     Odds are this is already enabled for your system. If you notice you cannot mount the System partition in writeable mode (see next steps), you may still need to disable SIP:
     1. Reboot your system and actiavte the Clover EFI Menu.
     1. Go to _Options > System Parameters > System Integrity Protection_.
     1. Enable the whole lot; one of them should do the trick.
     1. Select _Return_ a couple times and boot into your system as you would normally.
1. Open the _Terminal_ app (other terminal apps are available) and change directory into this project folder:
   ```bash
   cd /path/to/hide-macos-dock-items
   ```
1. Mount the system partition in writeable mode:
   ```bash
   sudo mount -uw /
   ```
1. Backup the original Dock PLIST file:
   ```bash
   sudo cp '/System/Library/CoreServices/Dock.app/Contents/Resources/DockMenus.plist' '/System/Library/CoreServices/Dock.app/Contents/Resources/DockMenus.backup.plist'
   ```
1. Add _Remove from Dock_ option to desired Dock item(s):
   1. Inject the _Remove from Dock_ option for the _Finder_ Dock item:
   ```bash
   sudo ./scripts/inject_dock_remove_option.sh '/System/Library/CoreServices/Dock.app/Contents/Resources/DockMenus.plist' 'finder-running'
   ```
   1. Inject the _Remove from Dock_ option for the _Trash_ Dock item:
   ```bash
   sudo ./scripts/inject_dock_remove_option.sh '/System/Library/CoreServices/Dock.app/Contents/Resources/DockMenus.plist' 'trash'
   ```
1. You should now see a _Remove from Dock_ option when right-clicking on the _Finder_ or _Trash_ item in your Dock (assuming you performed the associated injection step above). Hit it and you're all set!
1. Reenable _System Integrity Protection_:
   This is optional, but strongly recommended.
   - _Regular macOS:_
     1. Boot into _Recovery Mode_:
        ```bash
        sudo nvram "recovery-boot-mode=unused"
        sudo reboot
        ```
     1. Once in _Recovery Mode_ open the _Terminal_ app (_Utilities > Terminal_).
     1. Disable _SIP_ & reboot:
        ```bash
        csrutil enable
        reboot
        ```
   - _Hackintosh:_
     If you followed the steps from before to temporarily disable additional SIP options, no action is needed to restore the SIP configuration you had before. Simply reboot your system.

## Undo Instructions

To restore the items and/or remove the _Remove from Dock_ option follow these steps (provided you kept the `.backup.plist` file generated by the original instructions):

1. Restore and delete the PLIST backup:
   (Note that for this step you may need to disable and later restore _System Integrity Protection_ again. You can follow the approriate steps in the installation instructions above.)
   ```bash
   sudo mv '/System/Library/CoreServices/Dock.app/Contents/Resources/DockMenus.backup.plist' '/System/Library/CoreServices/Dock.app/Contents/Resources/DockMenus.plist'
   ```
1. Restart the _Dock_ app:
   ```bash
   killall Dock
   ```

## Disclaimer

Follow these steps at your own risk, duh. I do not take any responsibility for any damage dealt to your system or data by the provided instructions or included scripts. As usual, please perform a system backup before attempting any system modifications.

## Credit

I'm no wizzard, Harry, and couldn't have done this alone. Lots of individual steps and instructions were gratefully borrowed from other people:
- [Apple SIP Guide](https://developer.apple.com/library/archive/documentation/Security/Conceptual/System_Integrity_Protection_Guide/ConfiguringSystemIntegrityProtection/ConfiguringSystemIntegrityProtection.html#//apple_ref/doc/uid/TP40016462-CH5-SW1)
- [Hackintosher](https://hackintosher.com/forums/thread/enable-disable-system-integrity-protection-sip-on-a-hackintosh.53/)
- [jksoegaard](https://apple.stackexchange.com/a/367367)
- [Minimal Mac](https://discussions.apple.com/thread/6638249?answerId=26984634022#26984634022)
- [jesscXC](https://github.com/jesscXC/hide-finder-trash-dock-icons)
